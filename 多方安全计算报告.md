# MPC-FL
多方安全计算技术&amp;联邦学习相关/Multi party security computing technology federated learning
## 多方安全计算研究报告
### 1.多方安全计算技术旨在解决数据流通共享中的安全保密问题。
在无可信第三方的条件下，多方安全计算通过同态加密、混淆电路、不 经意传输和秘密共享等技术环节，保障各个参与方数据输入的隐私性和计算结果的准确性。<br><br>

### 2.隐私计算（Privacy Computing）是指在保护数据本身不对外泄露 的前提下实现数据分析计算的一类信息技术，主要分为可信硬件和密 码学两大领域。
其中，可信硬件技术目前主要指可信执行环境（TEE）， 其核心思想是构建一个硬件安全区域，数据仅在该安全区域内进行计 算。密码学的技术目前则以多方安全计算为代表。多方安全计算技术 核心思想是设计特殊的加密算法和协议，从而支持在加密数据之上直 接进行计算，得到所需的计算结果，同时不接触数据明文内容。<br><br>

### 3.多方安全计算解决的问题是在多个参与方的环境下，每一个参与 方都拥有自己的私密信息，同时又希望利用其它人的信息来共同完成 计算一个函数的过程。
多方安全计算问题是在一个分布式网络上计算 基于任何输入的函数，每个输入方在这个分布式网络上都拥有一个输 入，而这个分布式网络要确保输入的独立性，计算的正确性，而且除了各自的输入外，不透露其他方任何可用于推导其他方输入和输出的 信息。<br><br>

### 4.多方安全计算问题可以抽象概括成如下数学模型
设 P = {P1 ,P2 ,… }是 n 个参与者的集合，他们想要通过相互传递信 息的方式安全地计算某个给定函数 f(x1 ,x2 ,…,) = (y1 ,y2 ,…,)，其 中函数 的 个输入(x1 ,x2 ,…,)分别由 n 个参与者P1 ,P2 ,…秘密地 掌握而不被其他人知道，在计算结束后要求P1 ,P2 ,…分别得到 y1 ,y2 ,…,，这里的安全主要指参与者Pi( i= 1,2,…)得不到关于参与 者Pi的xi和yi(j = 1,2,…,i − 1,i + 1,…,n)的任何信息(xi和yi隐含信息除 外)。<br><br>

### 5.多方安全计算四大技术：
（1）同态加密 同态加密是一类具有特殊自然属性的加密方法，可在密文域下进 行数据运算的加密算法。与一般加密算法相比，同态加密除了能实现 基本的加密操作之外，还能实现密文间的多种计算功能，即先计算后 解密等价于先解密后计算。<br><br>
（2）混淆电路 混淆电路思想是利用计算机模拟集成电路的方式来实现多方安 全计算的，它将运算任务转化为门电路的形式，并且对每一条线路进 行加密，在很大程度上保障了用户的隐私安全。<br><br>
（3）不经意传输  不经意传输协议是一种可保护隐私的秘密协议，它使得服务发送 方和服务接收方以不经意的方式交互信息，从而可达到保护隐私的目 的。不经意传输协议是一个两方安全计算协议，接收方从发送方的数 据中选取部分数据，协议使得接收方除选取的内容外，对剩余数据一 无所知，并且发送方也无从知道被选取的内容。<br><br>
（4）秘密分享 秘密分享也被称为秘密分割，是一种对秘密信息的管理方式，它 将秘密进行拆分，拆分后的每一个分片由不同的参与者管理，单个参 与者无法恢复秘密信息，需要超过一定门限数量的人一同协作进行合 并才能恢复秘密文件。<br><br>

### 6.多方安全技术特点：
多方安全计算是解决一组互不信任的参与方之间保护隐私的协 同计算问题，它的特点包括：输入的隐私性、计算的正确性、去中心 化。 <br><br>
（1）输入的隐私性 多方安全计算主要是针对在无可信第三方的情况下，如何安全地 计算一个约定函数的问题，同时保障协同计算时各用户的隐私数据安 全。所以必须严格要求各参与方的输入保证独立性，保证本地数据与 隐私不被泄漏。 <br><br>
（2）计算的正确性 数据在各个节点根据固定的相关逻辑，从本地数据中进行采集并 计算，最后将输出的计算结果发送至指定节点，从而多方完成协同计 算任务，输出唯一性结果。在保证数据隐私的情况下，将计算结果反 馈到整个计算任务系统，从而各方得到正确的数据反馈。 <br><br>
（3）去中心化 在传统分布式计算中，都有中心节点来收集用户信息并进行运算 后派发给各个输入方，而多方安全计算协议进行去中心化处理，即保 证各参与方权力平等，不存在拥有特权的输入方或者第三方。<br><br>
多方安全计算分离了数据的使用权与所有权，实现了数据的可用 而不可得，并在数据生产方、数据需求方以及数据监管方三方相互制 约的情况下运营。<br><br>

### 7.应用场景：
（一）金融行业 <br><br>
金融行业已经开启多方安全计算应用。目前国内多方安全计算产 品主要应用于金融行业的风控和获客，即多家金融相关机构在不泄露 客户个人信息的前提下对客户进行联合画像和产品推荐，在多头借贷 等场景下能有效降低违约风险。<br><br>
例如，进行客户三要素（姓名、身份 证号、手机号）核验查询、风控评分查询，即使对查询客户的三要素 进行加密处理（如 MD5 加密等传统方法），依然有可能被对方通过 全量数据库碰撞而获得该查询客户的信息。<br><br>
联合建模需要较多数量的样本，金融机构和数据源交换这些真实的样本数据，存在两个风险：一是由于未 获得用户授权而导致违反《网络安全法》；二是机构自身商业秘密数 据容易被泄露。因此，联合建模一方发数据包到另一方是不合适的。 另外一种则是驻场建模形式，成本高，数据离线拷贝携带，同样存在 风险。<br><br>
针对以上金融行业的数据服务痛点，基于多方安全计算技术方案， 可以解决客户信息泄露问题和样本数据集的合规问题。 在对外查询时，不使用明文，也不使用简单的 MD5 哈希加密， 而是用两方加密计算，实现查询方能得到想要的数据，而被查询方无 法得知其查询的是哪个客户。<br><br>

1）被查询方将自身数据加工生产一个新的备查库，其中的 ID 字 段经过了私钥的加密并可用于加密计算； <br>
2）查询方使用被查询方公钥和自身的密钥构造查询入参 ID； <br>
3）被查询方与查询方进行两方加密计算； <br>
4）查询方用自身密钥解开被查询方的计算结果并进行匹配； <br>
5）查询方用不经意查询进一步获得匹配 ID 的数据。<br>

在基于多方安全计算的联合建模时，金融机构和数据源都在本地 管理自己的样本集，再与对方连接，实现多方样本集的虚拟融合和对 齐，再选择训练算法，在敏感数据不出门的情况下，产生模型。<br><br>

1）金融机构和数据源建立本地样本集； <br>
2）金融机构和数据源建立连接并创建合作项目； <br>
3）金融机构和数据源进行样本集的虚拟融合和对齐； <br>
4）金融机构和数据源选择基于多方安全计算的机器学习算法并 执行； <br>
5）对执行产生的模型结果进行分析和判断； <br>
6）对理想的模型结果进行部署使用。<br>

（二）医疗行业 <br><br>
医疗行业正在成为多方安全计算关注重点。由于个人健康数据属 于个人敏感信息，一直难以进行直接流通。通过多方安全计算技术， 医疗机构之间或医疗机构与其它数据方（如保险公司等）可以在不共 享原始数据的情况下分析用户的健康信息。 医疗机构间广泛存在通过数据共享进行临床研究以提高医疗水 平的需要。以医联体为例，但往往还存在以下问题： <br><br>
（1）数据采集难:医联体内数据分布在各医疗机构，医院不愿意 开放各自数据到中心端进行分析及利用。在开展互联网服务和对外合 作中，不希望数据被合作方取走，不希望被外部互联网服务存储。<br> 
（2）联合研究难：医联体内数据分布在各医疗机构，医院的数 据标准、编码方式等不完全一致，数据驱动下的联合研究较难实现。<br>
（3）数据的使用过程难以管理和控制，缺乏必要的存档和证据 溯查。<br>
 多方安全计算为临床科研的医疗数据共享提供了解决方案。在建 立分散存储的标准化数据库基础上，针对临床科研需求，应用多方安 全计算技术，可以实现分布式的统计分析算法，对数据库进行联合数 据分析，从而获得临床科研的研究成果。<br><br>

1) 各医院建立本地专病数据库； <br>
2) 领头医院发起临床科研多方合作项目，其它医院进行响应； <br>
3) 对临床科研多方合作数据进行虚拟融合； <br>
4) 部署临床科研多方合作数据分析和机器学习算法； <br>
5) 运行临床科研多方合作算法任务。<br><br>

### 8.多方安全计算遇到的挑战
一是多方安全计算技术性能还难以满足大规模商用要求。<br>
二是多方安全计算技术市场难以迅速培育。一方面，由于多方安全计算技术复杂且常常呈 现“黑盒化”现象，大部分用户对多方安全计算难以理解和信任。另一 方面，多方安全计算处理的对象往往是敏感的数据资产，试错成本大， 从而更加增加了用户的接受成本。<br>
三是目前大部分企业的数据规范性和数据质量难以支撑多方安 全计算技术。<br>
四是现有法律法规未对多方安全计算地位进行明确定位。<br>

### 9.发展趋势
多方安全计算兼具理论研究和实际应用价值，为大数据安全和隐 私保护计算提供了一条重要的技术路径。面向多方安全计算的未来发 展，将有以下几个重要趋势。 <br><br>
一是提升基础性能。<br>
二是研究高扩展性协议。<br>
三是与区块链和其它可信计算技术相结合。<br>

### 10.发展建议
一是推动技术成熟度提升。<br>
二是搭建自主开源平台。<br>
三是提升产业认知程度。<br>
四是研究相关法律法规。<br>
五是完善产业配套措施。<br>

### 11.术语
（1）多方安全计算(MPC)： <br>
多方安全计算（Secure Multi-Party Computation，缩写为MPC或 SMC）是指针对无可信第三方情况下，安全地进行多方协同的计算问 题。即在一个分布式网络中，多个参与实体各自持有秘密输入，各方 希望共同完成对某函数的计算，而要求每个参与实体除计算结果外均 不能得到其他参与实体的任何输入信息。多方安全计算的常用技术有 混淆电路(Garbled Circuit)、不经意传输(Oblivious Transfer)、秘密分享 （也称为秘密分割，Secret Sharing）、同态加密(Homomorphic Encryption)等。 <br><br>
（2）半诚实(semi-honest)安全行为模型： <br>
MPC安全假设的一种。如果MPC系统在以下前提下，除计算结 果外，不会泄露任何参与实体的隐私：系统中的不诚实参与实体会按 照协议规定进行运算，但会试图通过协议中得到的信息挖掘其他参与 实体的隐私，则称该MPC系统满足半诚实安全模型。 <br><br>
（3）隐蔽(covert)安全行为模型： <br>
MPC安全假设的一种。如果MPC系统不仅满足半诚实安全模型， 还满足以下前提： 系统中的不诚实参与实体会试图通过改变协议行为来挖掘其他 参与实体的隐私，但是这种作弊行为有λ的概率被其他参与实体发现。<br>
则称该MPC系统满足威慑因子为λ的隐蔽安全模型。一般而言， 隐蔽安全模型的安全性高于半诚实模型，且威慑因子越高，其安全性 越高。<br><br>
（4）公开可验证(public verifiable covert)安全行为模型： <br>
MPC安全假设的一种。如果MPC系统不仅满足半诚实安全模型， 还满足以下前提： 系统中的不诚实参与实体会试图通过改变协议行为来挖掘其他 参与实体的隐私，但是这种作弊行为有λ的概率被其他参与实体发现， 且其他参与实体可以自动生成公开可验证（例如带有不诚实参与者的 签名）的作弊证据。 则称该MPC系统满足威慑因子为λ的公开可验证安全模型。一般 而言，公开可验证安全模型的安全性高于隐蔽安全模型，且威慑因子 越高，其安全性越高。 <br><br>
（5）恶意(malicious)安全行为模型： <br>
MPC安全假设的一种。如果MPC系统不仅满足半诚实安全模型， 还在以下前提下，除计算结果外，不会泄露任何参与实体的隐私： 系统中的不诚实参与实体会试图通过改变协议行为来挖掘其他 参与实体的隐私。 则称该MPC系统满足恶意安全模型。一般而言，恶意安全模型的 安全性高于公开可验证安全模型。<br><br>
（6）不诚实门限(corruption threshold) ： <br>
MPC安全假设的一种。如果一个含有N个参与实体的MPC系统中 最多有t个参与者可以作出包括合谋在内的不诚实行为，且除计算结 果外不会泄露任何参与实体的隐私，则称该MPC系统可容忍t of N的 不诚实门限。一般而言，在N相同的情况下，t越大，其安全性越高。 当t<N/2时，称为诚实大多数（honest majority）；当N-1≥t≥N/2时，称为不诚实大多数（dishonest majority）。<br><br>
